<!DOCTYPE html>
<html>
<head>
  <title>Learning Object API: Sample Application</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script src="js/jquery-2.1.4.min.js"></script>
</head>
<body>

<header style="text-align: center; width: 100%">
  <div id="logo">
    <a target="_blank" href="http://github.com/agordillo/EuropeanaRS">
      <img alt="EuropeanaRS logo" src="images/Europeanars_logo.png"/>
    </a>
    <p>A Hybrid Learning Object Recommender System based on Europeana</p>
    <p>Learning Object API: Sample Application</p>
    <p>Check out source code</p>
  </div>
</header>

<button id="callAPI">Call Learning Object API</button>

<script type="text/javascript">
  $(document).ready(function(){
    $("#callAPI").click(function(){
      var data = {};
      //Provide the profile of the Learning Object to show
      data["lo_profile"] = {};
      data["lo_profile"]["resource_type"] = "TEXT";
      data["lo_profile"]["title"] = "South Wales daily news - 1895-07-30";
      data["lo_profile"]["description"] = "Began with issue for: No. 1 (7 Feb. 1872). Ended with issue for: No. 14283 (2 Apr. 1918).";
      data["lo_profile"]["language"] = "en";
      data["lo_profile"]["year"] = 1895;
      data["lo_profile"]["repository"] = "Europeana"
      data["lo_profile"]["id_repository"] = "/9200385/BibliographicResource_3000117394576"; //The resource id can be included in order to prevent the system to recommend the same item.
      data["lo_profile"]["url"] = "http://www.europeana.eu/portal/record/9200385/BibliographicResource_3000117394576.html?start=1&query=South+Wales+daily+news+-+1895-07-30&startPage=1&qt=false&rows=24"
      data["lo_profile"]["thumbnail_url"] = "http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fdams.llgc.org.uk%2Fiiif%2Fimage%2F3735010%2Ffull%2F%2C300%2F0%2Fnative.jpg&amp;size=LARGE&amp;type=TEXT";

      // Call API via ajax
      // $.ajax({
      //   type: "POST",
      //   url: "http://localhost:3000/los_api/",
      //   data: data,
      //   success: function(data){
      //     console.log(data);
      //   },
      //   error: function(error){
      //     console.log(error);
      //   }
      // });

      // Call API via html form. This way it redirects automatically to the new page.
      var form = $('<form method="POST" action="http://localhost:3000/los_api/" style="display: none;"></form>');
      $(form).append('<input type="hidden" name="lo_profile[resource_type]" value="' + data["lo_profile"]["resource_type]"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[title]" value="' + data["lo_profile"]["title"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[description]" value="' + data["lo_profile"]["description"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[language]" value="' + data["lo_profile"]["language"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[year]" value="' + data["lo_profile"]["year"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[repository]" value="' + data["lo_profile"]["repository"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[id_repository]" value="' + data["lo_profile"]["id_repository"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[url]" value="' + data["lo_profile"]["url"] + '"/>');
      $(form).append('<input type="hidden" name="lo_profile[thumbnail_url]" value="' + data["lo_profile"]["thumbnail_url"] + '"/>');

      $("body").append(form);
      $(form).submit();
    });
  });
</script>

</body>
</html>